<div class="container mt-4">
  <h2>RAH Combination Checker</h2>

  <!-- Patient Info -->
<!-- Patient Info -->
<div class="mb-4">
  <div class="row g-2">
    <div class="col-4">
      <label>First Name:</label>
      <input type="text" [(ngModel)]="firstName" class="form-control form-control-sm" />
    </div>
    <div class="col-4">
      <label>Last Name:</label>
      <input type="text" [(ngModel)]="lastName" class="form-control form-control-sm" />
    </div>
  </div>

  <div class="mt-3" style="max-width: 250px;">
    <label>Date of Birth:</label>
    <input type="date" [(ngModel)]="dob" class="form-control form-control-sm" />
  </div>

  <!-- Generate PIT Section -->
  <div class="mt-3">
    <button class="btn btn-info btn-sm" (click)="generatePIT()">Generate PIT</button>
    <div class="mt-2">
      <strong>PIT:</strong> {{ generatedPIT }}
    </div>
  </div>
</div>



  <hr />

  <!-- Two Columns for 2 RAH and 3 RAH Sections -->
  <div class="row">
    <!-- Left Column: 2 RAH -->
    <div class="col-md-6">
      <h4>Check 2 RAH ID Combination</h4>
      <div class="row mb-3">
        <div class="col">
          <input type="text" [(ngModel)]="rahId1" placeholder="RAH ID 1" class="form-control" />
        </div>
        <div class="col">
          <input type="text" [(ngModel)]="rahId2" placeholder="RAH ID 2" class="form-control" />
        </div>
        <div class="col-auto">
          <button class="btn btn-primary" (click)="checkCombinationTwo()">Check</button>
        </div>
      </div>

      <div *ngIf="notFoundTwo" class="alert alert-danger">Combination not found.</div>

      <div *ngIf="resultTwo">
        <div class="card mb-4">
          <div class="card-body">
            <h5><strong>Combination:</strong> {{ resultTwo.combination }}</h5>
            <p><strong>Patient:</strong> {{ patientName }}</p>
            <p><strong>DOB:</strong> {{ dob }}</p>

            <div class="mt-3 p-3" style="background-color: #f1f8e9; border-radius: 8px;">
              <h5><strong>Analysis</strong></h5>
              <p [innerHTML]="analysisTwo"></p>
            </div>

            <div class="mt-3 p-3" style="background-color: #e1f5fe; border-radius: 8px;">
              <h5><strong>Potential Indications</strong></h5>
              <div *ngFor="let line of potentialIndicationListTwo">
                <ng-container *ngIf="line.startsWith('-'); else headerTwo">
                  <label>
                    <input
                      type="checkbox"
                      (change)="onCheckboxChangeTwo(line, $event)"
                      [checked]="selectedIndicationsTwo.includes(line.substring(2).trim())"
                    />
                    {{ line.substring(2) }}
                  </label>
                </ng-container>
                <ng-template #headerTwo>
                  <strong>{{ line }}</strong>
                </ng-template>
              </div>
            </div>

            <div class="mt-3 p-3" style="background-color: #ede7f6; border-radius: 8px;">
              <h5><strong>Recommendations for Rebalancing</strong></h5>
              <p [innerHTML]="recommendationTwo"></p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Right Column: 3 RAH -->
    <div class="col-md-6">
      <h4>Check 3 RAH ID Combination</h4>
      <div class="row mb-3">
        <div class="col">
          <input type="text" [(ngModel)]="rahId3_1" placeholder="RAH ID 1" class="form-control" />
        </div>
        <div class="col">
          <input type="text" [(ngModel)]="rahId3_2" placeholder="RAH ID 2" class="form-control" />
        </div>
        <div class="col">
          <input type="text" [(ngModel)]="rahId3_3" placeholder="RAH ID 3" class="form-control" />
        </div>
        <div class="col-auto">
          <button class="btn btn-primary" (click)="checkCombinationThree()">Check</button>
        </div>
      </div>

      <div *ngIf="notFoundThree" class="alert alert-danger">Combination not found.</div>

      <div *ngIf="resultThree">
        <div class="card mb-4">
          <div class="card-body">
            <h5><strong>Combination:</strong> {{ resultThree.combination }}</h5>
            <p><strong>Patient:</strong> {{ patientName }}</p>
            <p><strong>DOB:</strong> {{ dob }}</p>

            <div class="mt-3 p-3" style="background-color: #f1f8e9; border-radius: 8px;">
              <h5><strong>Analysis</strong></h5>
              <p [innerHTML]="analysisThree"></p>
            </div>

            <div class="mt-3 p-3" style="background-color: #e1f5fe; border-radius: 8px;">
              <h5><strong>Potential Indications</strong></h5>
              <div *ngFor="let line of potentialIndicationListThree">
                <ng-container *ngIf="line.startsWith('-'); else headerThree">
                  <label>
                    <input
                      type="checkbox"
                      (change)="onCheckboxChangeThree(line, $event)"
                      [checked]="selectedIndicationsThree.includes(line.substring(2).trim())"
                    />
                    {{ line.substring(2) }}
                  </label>
                </ng-container>
                <ng-template #headerThree>
                  <strong>{{ line }}</strong>
                </ng-template>
              </div>
            </div>

            <div class="mt-3 p-3" style="background-color: #ede7f6; border-radius: 8px;">
              <h5><strong>Recommendations for Rebalancing</strong></h5>
              <p [innerHTML]="recommendationThree"></p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Print Button -->
  <div class="text-center mt-4">
    <button class="btn btn-secondary" (click)="printPage()">Print</button>
  </div>
</div>
