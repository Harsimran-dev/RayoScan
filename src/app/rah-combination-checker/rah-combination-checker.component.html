<div class="container p-4">
  <h2>RAH Combination Checker</h2>

  <div class="row mb-4">
  <div class="col-md-6">
    <label for="patientName" class="form-label">Patient Name</label>
    <input id="patientName" [(ngModel)]="patientName" name="patientName" class="form-control" />
  </div>
  <div class="col-md-6">
    <label for="dob" class="form-label">Date of Birth</label>
    <input id="dob" type="date" [(ngModel)]="dob" name="dob" class="form-control" />
  </div>
</div>


  <div class="row">
    <!-- Two RAH IDs checker -->
    <div class="col-md-6">
      <h4>Check 2 RAH IDs Combination</h4>

      <div class="form-group">
        <label>RAH ID 1:</label>
        <input [(ngModel)]="rahId1" class="form-control" />
      </div>

      <div class="form-group mt-2">
        <label>RAH ID 2:</label>
        <input [(ngModel)]="rahId2" class="form-control" />
      </div>

      <button class="btn btn-primary mt-3" (click)="checkCombinationTwo()">Check Combination</button>

      <mat-card *ngIf="resultTwo" class="mt-4" style="background: #e3f2fd; color: #0d47a1; font-family: 'Roboto', sans-serif;">
        <mat-card-title style="font-weight: 700; font-size: 1.5rem;">Names</mat-card-title>
        <mat-card-content>
          <p style="font-size: 1.2rem; font-style: italic;">{{ resultTwo.combination }}</p>
        </mat-card-content>
      </mat-card>

      <mat-card *ngIf="resultTwo" class="mt-3" style="background: white; color: black; font-family: 'Georgia', serif;">
        <mat-card-title style="font-weight: 700; font-size: 1.5rem;">Analysis</mat-card-title>
        <mat-card-content>
          <div style="white-space: pre-line; font-family: 'Courier New', monospace; font-size: 1rem; line-height: 1.4; margin-bottom: 1rem;">
            {{ extractBefore(resultTwo.indication, 'Potential Indications:') }}
          </div>

          <div style="background: #e1f5fe; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
            <h5 style="font-weight: bold; margin-bottom: 0.5rem;"> Potential Indications</h5>
            <div style="white-space: pre-line; font-family: 'Courier New', monospace; font-size: 1rem;">
              {{ extractBetween(resultTwo.indication, 'Potential Indications:', 'Recommendation for Rebalancing:') }}
            </div>
          </div>

          <div style="background: #f1f8e9; padding: 1rem; border-radius: 8px;">
            <h5 style="font-weight: bold; margin-bottom: 0.5rem;"> Recommendation for Rebalancing</h5>
            <div style="white-space: pre-line; font-family: 'Courier New', monospace; font-size: 1rem;">
              {{ extractAfter(resultTwo.indication, 'Recommendation for Rebalancing:') }}
            </div>
          </div>
        </mat-card-content>
      </mat-card>

      <div *ngIf="notFoundTwo" class="mt-3 text-danger" style="font-weight: 600;">
        No matching combination found.
      </div>
    </div>

    <!-- Three RAH IDs checker -->
    <div class="col-md-6">
      <h4>Check 3 RAH IDs Combination</h4>

      <div class="form-group">
        <label>RAH ID 1:</label>
        <input [(ngModel)]="rahId3_1" class="form-control" />
      </div>

      <div class="form-group mt-2">
        <label>RAH ID 2:</label>
        <input [(ngModel)]="rahId3_2" class="form-control" />
      </div>

      <div class="form-group mt-2">
        <label>RAH ID 3:</label>
        <input [(ngModel)]="rahId3_3" class="form-control" />
      </div>

      <button class="btn btn-primary mt-3" (click)="checkCombinationThree()">Check Combination</button>

      <mat-card *ngIf="resultThree" class="mt-4" style="background: #fff3e0; color: #bf360c; font-family: 'Roboto', sans-serif;">
        <mat-card-title style="font-weight: 700; font-size: 1.5rem;">Names</mat-card-title>
        <mat-card-content>
          <p style="font-size: 1.2rem; font-style: italic;">{{ resultThree.combination }}</p>
        </mat-card-content>
      </mat-card>

      <mat-card *ngIf="resultThree" class="mt-3" style="background: #fffde7; color: #3e2723; font-family: 'Georgia', serif;">
        <mat-card-title style="font-weight: 700; font-size: 1.5rem;">Analysis</mat-card-title>
        <mat-card-content>
          <div style="white-space: pre-line; font-family: 'Courier New', monospace; font-size: 1rem; line-height: 1.4; margin-bottom: 1rem;">
            {{ extractBefore(resultThree.indication, 'Potential Indications:') }}
          </div>

          <div style="background: #e1f5fe; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
            <h5 style="font-weight: bold; margin-bottom: 0.5rem;"> Potential Indications</h5>
            <div style="white-space: pre-line; font-family: 'Courier New', monospace; font-size: 1rem;">
              {{ extractBetween(resultThree.indication, 'Potential Indications:', 'Recommendation for Rebalancing:') }}
            </div>
          </div>

          <div style="background: #f1f8e9; padding: 1rem; border-radius: 8px;">
            <h5 style="font-weight: bold; margin-bottom: 0.5rem;"> Recommendation for Rebalancing</h5>
            <div style="white-space: pre-line; font-family: 'Courier New', monospace; font-size: 1rem;">
              {{ extractAfter(resultThree.indication, 'Recommendation for Rebalancing:') }}
            </div>
          </div>
        </mat-card-content>
      </mat-card>

      <div *ngIf="notFoundThree" class="mt-3 text-danger" style="font-weight: 600;">
        No matching combination found.
      </div>
    </div>
  </div>

  <div class="text-center mt-5">
  <button class="btn btn-outline-secondary" (click)="printPage()">üñ®Ô∏è Print Page</button>
</div>

</div>
