<!-- File upload input -->
<input type="file" (change)="readFile($event)">

<!-- Print Button -->
<button (click)="printPage()" class="btn btn-success" style="margin-top: 20px;">
  Print as PDF
</button>
<button (click)="togglePdfPreview()" class="btn btn-info" style="margin-top: 20px;">
  {{ showPdfPreview ? 'Hide PDF Preview' : 'Show PDF Preview' }}
</button>

<!-- PDF Preview Section -->
<div *ngIf="showPdfPreview && pdfSrc" style="margin-top: 20px; text-align: center;">
  <h5>PDF Preview</h5>
  <iframe [src]="pdfSrc" width="50%" height="600px"></iframe>
</div>
<button (click)="togglePieChart()" class="btn btn-primary" style="margin-top: 20px;">
  {{ showPieChart ? 'Hide Pie Chart' : 'Show Pie Chart' }}
</button>

<!-- Content to be printed -->
<div id="printSection" *ngIf="clientData" style="margin-top: 20px; text-align: center;">
  <h5>Client Information</h5>
  <!-- Displaying the extracted RAH ID -->
<div *ngIf="rahIdNumber">
  <p> ID: {{ rahIdNumber }}</p>
</div>

  <p><strong>Full Name:</strong> {{ clientData.fullName }}</p>

  <!-- Button to toggle pie chart visibility -->
 

  <!-- Pie chart display -->
  <div *ngIf="showPieChart" style="display: flex; flex-direction: column; align-items: center; margin-top: 20px;">
    <canvas baseChart #pieChartCanvas [data]="pieChartData" [type]="'pie'" [options]="pieChartOptions"
      style="max-width: 250px; max-height: 250px;">
    </canvas>
  </div>

  <!-- ðŸŽ¨ Color-Coded Legend Below the Pie Chart -->
  <div *ngIf="showPieChart && pieChartData.labels && pieChartData.labels.length" style="margin-top: 20px;">

    <ul style="list-style: none; padding: 0; display: flex; flex-wrap: wrap; justify-content: center;">
      <li *ngFor="let label of pieChartData.labels; let i = index"
        style="display: flex; align-items: center; margin: 5px 10px;">
        <span [style.backgroundColor]="legendColors[i]"
          style="width: 20px; height: 20px; display: inline-block; margin-right: 10px; border-radius: 50%;"></span>
        {{ label }}
      </li>
    </ul>
  </div>

  <!-- Color Counts -->
  <div class="color-counts" style="margin-top: 40px; text-align: center;">
    <h5>Color Counts</h5>
    <ul style="list-style: none; padding: 0; display: flex; justify-content: center;">
      <li *ngFor="let color of objectKeys(colorCounts)" style="margin: 0 15px;">
        <span [style.backgroundColor]="color"
          style="width: 20px; height: 20px; display: inline-block; border-radius: 50%; margin-right: 10px;"></span>
        {{ color | titlecase }}: {{ colorCounts[color] }} ({{ calculatePercentage(colorCounts[color]) }}%)
      </li>
    </ul>
  </div>


  <div class="container mt-4 custom-container">
    <div class="row">
      <div class="col-md-12">
        <div *ngFor="let causeGroup of getSortedCauses(); let i = index; trackBy: trackByCause">
          <mat-card class="cause-card">
            <!-- Toggle Cause Group Details -->
            <mat-card-header (click)="toggleCauseDetails(i)" style="cursor: pointer;">
              <mat-card-title [style.color]="causeGroup.items[0]?.color"> <!-- Bind color here -->
                {{ causeGroup.cause }}
                <span style="float: right;">
                 
                </span>
              </mat-card-title>
            </mat-card-header>
  
            <!-- Show Cause Group Details -->
            <mat-card-content *ngIf="expandedCauseGroup[i]">
              <ul>
                <li *ngFor="let item of causeGroup.items" [style.color]="item.color" (click)="fetchExcelRecord(item.code, item.name)">
                  <strong>{{ item.code }}</strong> - {{ item.name }} - {{ item.percentage }}%
                </li>
              </ul>
            </mat-card-content>
            
            
          </mat-card>
        </div>
      </div>
    </div>
  </div>
  
  
  
  

<!-- Modal for showing detailed information about the selected record -->
<!-- Modal for showing detailed information about the selected record -->
<div *ngIf="selectedExcelRecord" class="edit-description-container">
  <h3 class="description-title">Practitioner Comments</h3>

  <!-- Display 100% Cause Name -->
  <p *ngIf="selectedExcelRecord.name" class="cause-name">
    <strong>100% Cause:</strong> {{ selectedExcelRecord.name }}
  </p>

  <mat-form-field appearance="fill" class="description-field">
    <mat-label>Description</mat-label>
    <textarea matInput [(ngModel)]="selectedExcelRecord.fullDescription" 
              placeholder="Enter a detailed description here..."
              class="auto-expand-textarea"></textarea>
  </mat-form-field>
  <div class="container">
    <ngx-signature-pad [config]="config" #testPad></ngx-signature-pad>
  </div>
  
  <button (click)="clear()">clear</button>
  <button (click)="getImage()" [disabled]="isInValid()">get image</button>
  <button (click)="changeConfig()">change config</button>
  <button (click)="forceReload()">forceReload</button>
  
 

  <!-- Save Button -->
</div>


